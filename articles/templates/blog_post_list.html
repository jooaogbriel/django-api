{% extends 'base.html' %}

{% block content %}
  <h2>Blog</h2>
  
  {% for post in posts %}
    <article>
      <h3>{{ post.title }}</h3>
      <p>{{ post.content }}</p>
      
      <!-- Display comments for the current post -->
      <ul>
        {% for comment in post.comment_set.all %}
          <li>{{ comment.name }} - {{ comment.created_at|date:"F d, Y H:i" }}<br>{{ comment.body }}</li>
        {% endfor %}
      </ul>
      
      <!-- Form to add new comment -->
      <form >
        {% csrf_token %}
        <label for="name">Name:</label>
        <input type="text" name="name" required><br>
        <label for="email">Email:</label>
        <input type="email" name="email" required><br>
        <label for="body">Comment:</label>
        <textarea name="body" required></textarea><br>
        <button type="submit">Add Comment</button>
      </form>
    </article>
  {% endfor %}
{% endblock %}